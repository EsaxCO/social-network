(this.webpackJsonplesson=this.webpackJsonplesson||[]).push([[4],{298:function(e,t,a){"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,s=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(a.push(c.value),!t||a.length!==t);n=!0);}catch(o){r=!0,s=o}finally{try{n||null==i.return||i.return()}finally{if(r)throw s}}return a}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}a.d(t,"a",(function(){return n}))},299:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},302:function(e,t,a){},303:function(e,t,a){},320:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),s=a(11),c=a(298),i=a(0),o=a.n(i),u=(a(299),a(300),a(301),a(10)),l=function(e){var t=e.id,a=e.name;return o.a.createElement("li",{className:"section-dialogs-inner-members-li"},o.a.createElement(u.b,{className:"section-dialogs-inner-members-li-url",to:"/home/dialogs/"+t},a))},m=a(30),d=function(e){e.membersData;var t=m.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),a=Object(i.useState)([]),n=Object(c.a)(a,2),u=n[0],d=n[1];Object(i.useEffect)((function(){(function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/dialogs");case 2:200===(a=e.sent).status&&d(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(i.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/dialogs");case 2:200===(a=e.sent).status&&d(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();setTimeout((function(){e()}),15e3)}),[u]);var f=u.map((function(e){return o.a.createElement(l,{key:e.id,id:e.id,name:e.userName})}));return o.a.createElement("ul",{className:"section-dialogs-inner-members"},f)},f=(a(302),a(94)),b=a.n(f),v=a(34),p=(a(303),a(127)),g=a(128),E=Object(g.a)({form:"SendMessageFormn"})((function(e){var t=e.handleSubmit;return o.a.createElement("form",{onSubmit:t,name:"SendMessage"},o.a.createElement("div",{className:"section-dialogs-inner-newmessage"},o.a.createElement(p.a,{name:"message",component:"textarea",className:"section-dialogs-inner-newmessage-input",id:"",rows:"2"}),o.a.createElement("button",{className:"section-dialogs-inner-newmessage-button"},"Send Message")))})),h=function(e){var t=e.id,a=m.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),n=Object(i.useState)(!1),u=Object(c.a)(n,2),l=u[0],d=u[1],f=Object(i.useState)(""),b=Object(c.a)(f,2),v=b[0],p=b[1];Object(i.useEffect)((function(){l&&(function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.post("/dialogs/".concat(t,"/messages"),{body:v});case 2:200===e.sent.status&&p("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),d(!1))}),[l]);return o.a.createElement(E,{onSubmit:function(e){var t=e.message;p(t),d(!0)}})},j=a(53),w=function(e){var t=e.id,a=e.avatar,n=m.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),u=Object(i.useState)(!1),l=Object(c.a)(u,2),d=l[0],f=l[1];Object(i.useEffect)((function(){(function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/dialogs/".concat(t,"/messages"));case 2:200===(a=e.sent).status&&(E(a.data.items),f(!0));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var v=Object(i.useState)(null),p=Object(c.a)(v,2),g=p[0],E=p[1];if(Object(i.useEffect)((function(){var e=function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("/dialogs/".concat(t,"/messages"));case 2:200===(a=e.sent).status&&E(a.data.items);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();setTimeout((function(){e()}),5e3)}),[g]),!1===d)return o.a.createElement("div",{className:"MessagesLoader"},o.a.createElement(j.a,{isLoading:!0}));var w=g.map((function(e){return o.a.createElement("div",{key:e.id,className:"section-dialogs-inner-active-message"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-sm-2"},o.a.createElement("div",{className:"section-dialogs-inner-active-message-avatar"},o.a.createElement("img",{className:"rounded-circle",src:a||b.a,alt:""}))),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("div",{className:"section-dialogs-inner-active-message-item center-block"},e.body))))}));return o.a.createElement("div",{className:"section-dialogs-inner-active"},w,o.a.createElement(h,{mounted:d,id:t}))},O=function(e){var t=e.membersList;if(null===t)return o.a.createElement("div",{className:"MessagesLoader"},o.a.createElement(j.a,{isLoading:!0}));var a=t.map((function(e){return o.a.createElement(v.b,{exact:!0,path:"/home/dialogs/"+e.id,render:function(){return o.a.createElement(w,{key:e.id,avatar:e.photos.small,id:e.id})}})}));return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"section-dialogs-inner-active"},a))};t.default=function(e){e.dialogsData,e.messagesData;var t=m.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),a=Object(i.useState)([]),n=Object(c.a)(a,2),l=n[0],f=n[1];return Object(i.useEffect)((function(){(function(){var e=Object(s.a)(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get("/dialogs");case 2:200===(a=e.sent).status&&f(a.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),o.a.createElement(u.a,null,o.a.createElement("div",{className:"section-dialogs"},o.a.createElement("div",{className:"section-dialogs-inner"},o.a.createElement("div",{className:"col-sm-3"},o.a.createElement(d,null)),o.a.createElement("div",{className:"col-sm-9"},o.a.createElement(O,{membersList:l})))))}}}]);
//# sourceMappingURL=4.291b7a33.chunk.js.map