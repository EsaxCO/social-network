(this.webpackJsonplesson=this.webpackJsonplesson||[]).push([[0],{130:function(e,t,n){"use strict";var s=n(5),a=n.n(s),c=n(10),r=n(17),i=n(6),o=n(19).create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"});function l(e){return o.put("/dialogs/".concat(e))}n.d(t,"a",(function(){return d}));var m="dialogsReducer/SEND-MESSAGE",u={count:0},d=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:t.sent.status;case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(i.a)({},e,{messagesData:[].concat(Object(r.a)(e.messagesData),[{id:1,message:t.text}])});case"dialogsReducer/SET-MEMBERS-DATA":return Object(i.a)({},e,{membersData:t.members});default:return e}}},136:function(e,t,n){e.exports=n.p+"static/media/logoin.ff1e30d7.png"},162:function(e,t,n){e.exports=n(298)},248:function(e,t,n){},249:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},256:function(e,t,n){},257:function(e,t,n){},258:function(e,t,n){},259:function(e,t,n){},28:function(e,t,n){e.exports=n.p+"static/media/news-blocker.28978814.jpg"},297:function(e,t,n){},298:function(e,t,n){"use strict";n.r(t);n(95),n(96),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=n(9),a=n(93),c=n(130),r=n(5),i=n.n(r),o=n(10),l=n(17),m=n(6),u=n(19),d=n.n(u),p=u.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),f=function(e,t){return p.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},w="usersReducer/FOLLOW-CHANGE",E="usersReducer/SET-USERS",h="usersReducer/SET-COUNT",g={users:[],currentPage:1,countSize:5,totalCount:null,isLoading:!1,statusFollowing:[]},v=function(e){return{type:w,userID:e}},b=function(e){return{type:w,userID:e}},N=function(e){return{type:E,users:e}},O=function(e){return{type:h,count:e}},j=function(e){return{type:"usersReducer/SET-LOADING-STATUS",status:e}},S=function(e){return{type:"usersReducer/CHANGE-FOLLOWING-PROGRESS-STATUS",id:e}},y=function(){var e=Object(o.a)(i.a.mark((function e(t,n,s,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(S(n)),e.next=3,s;case 3:0===e.sent.data.resultCode&&t(a),t(S(n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,s,a){return e.apply(this,arguments)}}(),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(m.a)({},e,{users:e.users.map((function(e){return e.id===t.userID?Object(m.a)({},e,{followed:!e.followed}):e}))});case E:return Object(m.a)({},e,{users:[].concat(Object(l.a)(e.users),Object(l.a)(t.users))});case"usersReducer/SET-DEFAULT-PAGE":return{users:[],currentPage:1,countSize:5,totalCount:null,isLoading:!1,statusFollowing:[]};case"usersReducer/SET-CURRENT-PAGE":return Object(m.a)({},e,{currentPage:t.currentPage});case h:return Object(m.a)({},e,{totalCount:t.count});case"usersReducer/CHANGE-FOLLOWING-PROGRESS-STATUS":return Object(m.a)({},e,{statusFollowing:e.statusFollowing.some((function(e){return e===t.id}))?e.statusFollowing.filter((function(e){return e!==t.id})):[].concat(Object(l.a)(e.statusFollowing),[t.id])});case"usersReducer/SET-LOADING-STATUS":return Object(m.a)({},e,{isLoading:t.status});default:return e}},T=u.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"});function C(){return T.get("auth/me")}var P={id:null,login:null,email:null,isAuth:null,pathRedirect:null},L=function(e,t,n,s){return{type:"authReducer/SET_AUTH_STATUS",data:{id:e,login:t,email:n,isAuth:s}}};var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"authReducer/SET_AUTH_STATUS":return Object(m.a)({},e,{},t.data,{isAuth:t.data.isAuth});case"authReducer/SET-SUCCESS-STATUS":return Object(m.a)({},e,{pathRedirect:t.pathRedirect});default:return e}},A=n(131),x=n(129),U=n(37),I="loginReducer/SET-LOADING",D="loginReducer/SET-CAPTCHA",F={isLoading:!1,captcha:null},M=function(e){return{type:I,status:e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(m.a)({},e,{isLoading:t.status});case D:return Object(m.a)({},e,{captcha:t.url});default:return e}},H=n(132),z=Object(s.combineReducers)({profilePage:a.b,messagesPage:c.b,usersPage:k,authPage:R,loginPage:G,form:x.a}),W=Object(s.createStore)(z,Object(H.composeWithDevTools)(Object(s.applyMiddleware)(A.a)));window.store=W;var K=W,Y=n(0),_=n.n(Y),B=n(63),J=n.n(B),V=n(13),q=n(11),$=n(23),Q=n(24),X=n(26),Z=n(25),ee=(n(248),n(33)),te=n(91),ne=(n(249),u.create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"})),se=function(){var e=Object(Y.useState)(0),t=Object(te.a)(e,2),n=t[0],s=t[1];return Object(Y.useEffect)((function(){var e=d.a.CancelToken.source(),t=function(){var t=Object(o.a)(i.a.mark((function t(){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ne.get("/dialogs/messages/new/count",{cancelToken:e.token});case 3:200===(a=t.sent).status&&a.data===n&&s(a.data),t.next=14;break;case 7:if(t.prev=7,t.t0=t.catch(0),!d.a.isCancel(t.t0)){t.next=13;break}console.log("cancel request Navbar"),t.next=14;break;case 13:throw t.t0;case 14:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),a=setInterval((function(){t()}),15e3);return t(),function(){clearInterval(a),e.cancel()}}),[n]),_.a.createElement("div",{className:"col-sm-3 fixed-left"},_.a.createElement("nav",{className:"section-menu"},_.a.createElement("ul",null,_.a.createElement("li",{className:"section-menu-li"},_.a.createElement(q.c,{className:"section-menu-li-url",to:"/home/profile"},"Profile")),n?_.a.createElement(_.a.Fragment,null,_.a.createElement("div",{className:"wrapper"},_.a.createElement("li",{className:"section-menu-li"},_.a.createElement(q.c,{className:"section-menu-li-url",to:"/home/dialogs"},"Messages")),_.a.createElement("span",{className:"updated"},n))):_.a.createElement("li",{className:"section-menu-li"},_.a.createElement(q.c,{className:"section-menu-li-url",to:"/home/dialogs"},"Messages")),_.a.createElement("li",{className:"section-menu-li"},_.a.createElement(q.c,{className:"section-menu-li-url",to:"/home/users"},"Users")),_.a.createElement("li",{className:"section-menu-li"},_.a.createElement(q.c,{className:"section-menu-li-url",to:"/home/news"},"News")))))},ae=(n(251),n(28)),ce=n.n(ae),re=function(e){return _.a.createElement("div",{className:"section-news"},_.a.createElement("div",{className:"section-news-header"},_.a.createElement("span",null,"News")),_.a.createElement("div",{className:"section-news-elements"},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem"))),_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""}))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""})),_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem")))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem"))),_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""}))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""})),_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem")))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem"))),_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""}))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""})),_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem")))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem"))),_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""}))),_.a.createElement("div",{className:"col-sm-12 section-news-elements-item"},_.a.createElement("div",{className:"col-sm-3 section-news-elements-item-image"},_.a.createElement("img",{className:"img-responsive",src:ce.a,alt:""})),_.a.createElement("div",{className:"col-sm-9 section-news-elements-item-content"},_.a.createElement("div",{className:"section-news-elements-item-content-title"},"Hello world"),_.a.createElement("div",{className:"section-news-elements-item-content-description"},_.a.createElement("p",null,"section-news-elements-itemsection-news-elements-itemsection-news-elements-itemsection-news-elemite msection-news-elements-iteitemsection-news-elements-itemsection-news-elements-itemsection-news-elem msection-news-elements-itemsection-news-elements-iitemsection-news-elements-itemsection-news-elements-itemsection-news-elemtem")))))))},ie=(n(252),function(e){return _.a.createElement("div",{className:"section-music"},_.a.createElement("h1",null,"Soon"))}),oe=(n(253),function(e){return _.a.createElement("div",{className:"section-groups"},_.a.createElement("h1",null,"Soon"))}),le=(n(254),function(e){return _.a.createElement("div",{className:"section-settings"},_.a.createElement("h1",null,"Soon"))}),me=(n(255),n(94)),ue=n.n(me),de=n(54),pe=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentWillUnmount",value:function(){this.props.setDefaultPage()}},{key:"render",value:function(){var e=this,t=this.props.users.map((function(t){return _.a.createElement("div",{key:t.id+Math.random(),className:"section-users-elements-item col-sm-12"},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"section-users-elements-item-right col-sm-3"},_.a.createElement(q.c,{to:"/home/users/"+t.id}," ",_.a.createElement("img",{src:null!=t.photos.small?t.photos.small:ue.a,alt:"",className:"img-responsive img-circle center-block"})),t.followed?_.a.createElement("button",{disabled:e.props.statusFollowing.some((function(e){return e===t.id})),onClick:function(){e.props.unfollowUser(t.id)}},"unfollow"):_.a.createElement("button",{disabled:e.props.statusFollowing.some((function(e){return e===t.id})),onClick:function(){e.props.followUser(t.id)}},"follow")),_.a.createElement("div",{className:"section-users-elements-item-text col-sm-6"},_.a.createElement("h1",null,t.name),_.a.createElement("p",null,t.status)),_.a.createElement("div",{className:"section-users-elements-item-location col-sm-3"},_.a.createElement("h4",null,"user.location.city",", ","user.location.country"))))}));return _.a.createElement("div",{className:"section-users"},_.a.createElement("div",{className:"section-users-elements"},_.a.createElement("div",{className:"section-users-elements-header"},_.a.createElement("span",null,"\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439: ",this.props.totalCount)),_.a.createElement("div",{className:"row"},t,_.a.createElement("div",{className:"col-sm-12 section-users-elements-status"},_.a.createElement(de.a,{isLoading:this.props.isLoading})),_.a.createElement("div",{className:"section-users-elements-showbutton col-sm-12"},_.a.createElement("div",{className:"col-sm-4 col-sm-offset-4"},_.a.createElement("button",{onClick:function(){e.props.showMore(e.props.currentPage)}},"Show more"))))))}}]),n}(_.a.Component),fe=function(e){return e.usersPage.users},we=function(e){return e.usersPage.currentPage},Ee=function(e){return e.usersPage.countSize},he=function(e){return e.usersPage.isLoading},ge=function(e){return e.usersPage.statusFollowing},ve=function(e){return e.usersPage.totalCount},be=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object($.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).showMore=function(t){var n=t+1;e.props.showMore(n),e.props.getUsers(n,e.props.countSize)},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsers(1,this.props.countSize)}},{key:"render",value:function(){return _.a.createElement(pe,{totalCount:this.props.totalCount,isLoading:this.props.isLoading,statusFollowing:this.props.statusFollowing,followUser:this.props.followUser,unfollowUser:this.props.unfollowUser,setDefaultPage:this.props.setDefaultPage,showMore:this.showMore,users:this.props.users,currentPage:this.props.currentPage})}}]),n}(_.a.Component),Ne=Object(V.b)((function(e){return{users:fe(e),currentPage:we(e),countSize:Ee(e),isLoading:he(e),statusFollowing:ge(e),totalCount:ve(e)}}),{followingCurrentProgress:S,setDefaultPage:function(){return{type:"usersReducer/SET-DEFAULT-PAGE"}},getUsers:function(e,t){return function(){var n=Object(o.a)(i.a.mark((function n(s){var a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(j(!0)),n.next=3,f(e,t);case 3:a=n.sent,s(j(!1)),s(N(a.items)),s(O(a.totalCount));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},unfollowUser:function(e){return function(t){y(t,e,function(e){return p.delete("follow/".concat(e))}(e),b(e))}},followUser:function(e){return function(t){y(t,e,function(e){return p.post("follow/".concat(e))}(e),v(e))}},follow:v,showMore:function(e){return{type:"usersReducer/SET-CURRENT-PAGE",currentPage:e}},unfollow:b,setUsers:N,setTotalUserCount:O,setPreloader:j})(be),Oe=(n(256),function(e){var t=e.profile,n=e.UserLogout;return _.a.createElement("div",{className:"section-outer"},_.a.createElement("div",{className:"container"},_.a.createElement("div",{className:"section-header"},_.a.createElement("div",{className:"section-header-logo"},_.a.createElement(q.c,{className:"logotype-text",to:"/home"},"social-network")),_.a.createElement("div",{className:"section-header-button"},_.a.createElement("div",{className:"section-header-profile"},_.a.createElement(q.c,{to:"/home/profile"},t.login)),_.a.createElement("button",{onClick:n},"Log out")))))}),je=n(92),Se=Object(V.b)((function(e){return{profile:Object(je.b)(e)}}),{UserLogout:function(e,t,n){return function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.delete("/auth/login");case 2:0===e.sent.data.resultCode&&t(L(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(Oe),ye=n(40),ke=n.n(ye),Te=(n(257),function(e){var t=e.isLoading;return _.a.createElement("div",{className:"preloader"},t?_.a.createElement("img",{src:ke.a,alt:""}):null)}),Ce=_.a.lazy((function(){return Promise.all([n.e(5),n.e(4)]).then(n.bind(null,329))})),Pe=_.a.lazy((function(){return n.e(3).then(n.bind(null,328))})),Le=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.history.push(this.props.url),"/login"===this.props.url&&this.props.history.push("/home")}},{key:"render",value:function(){return _.a.createElement(_.a.Fragment,null,_.a.createElement(Se,null),_.a.createElement("div",{className:"outer-section"},_.a.createElement("div",{className:"container"},_.a.createElement("div",{className:"row"},_.a.createElement(se,null),_.a.createElement("div",{className:"col-sm-8 relative-content"},_.a.createElement("div",{className:"section-inner"},_.a.createElement(_.a.Suspense,{fallback:_.a.createElement(Te,{isLoading:!0})},_.a.createElement(ee.b,{key:"/home/dialogs",path:"/home/dialogs",render:function(){return _.a.createElement(Ce,null)}}),_.a.createElement(ee.b,{key:"/home",exact:!0,path:"/home",render:function(){return _.a.createElement(Pe,null)}}),_.a.createElement(ee.b,{key:"/home/profile",exact:!0,path:"/home/profile",render:function(){return _.a.createElement(Pe,null)}}),_.a.createElement(ee.b,{key:"/home/users/:userId",exact:!0,path:"/home/users/:userId",render:function(){return _.a.createElement(Pe,null)}}),_.a.createElement(ee.b,{key:"/home/users",exact:!0,path:"/home/users",render:function(){return _.a.createElement(Ne,null)}}),_.a.createElement(ee.b,{key:"/home/news",exact:!0,path:"/home/news",component:re}),_.a.createElement(ee.b,{key:"/home/music",exact:!0,path:"/home/music",component:ie}),_.a.createElement(ee.b,{key:"/home/groups",exact:!0,path:"/home/groups",component:oe}),_.a.createElement(ee.b,{key:"/home/settings",exact:!0,path:"/home/settings",component:le}))))))))}}]),n}(_.a.Component),Re=Object(ee.f)(Le),Ae=(n(258),n(136)),xe=n.n(Ae),Ue=n(127),Ie=n(128),De=n(52),Fe=n(67),Me=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){return Object($.a)(this,n),t.apply(this,arguments)}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.props.history.replace("/login")}},{key:"render",value:function(){return _.a.createElement("div",null,_.a.createElement(ze,this.props))}}]),n}(_.a.Component),Ge=Object(De.a)(30),He=Object(Ie.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,s=e.captcha,a=e.isLoading;return _.a.createElement("form",{onSubmit:t,className:"section-login-form"},_.a.createElement(Ue.a,{name:"email",validate:[De.b,Ge],component:Fe.a,placeholder:"Email",type:"text"}),_.a.createElement(Ue.a,{name:"password",validate:[De.b,Ge],component:Fe.a,placeholder:"Password",type:"password"}),_.a.createElement("div",{className:"col-sm-12 section-login-form-checkbox"},_.a.createElement(Ue.a,{name:"rememberMe",component:"input",type:"checkbox"}),_.a.createElement("h5",null,"Remember me")),n&&_.a.createElement("span",{className:"errorValidation"},n),s?_.a.createElement(_.a.Fragment,null,_.a.createElement("img",{className:"captchaLogin",src:s,alt:""}),_.a.createElement(Ue.a,{name:"captcha",validate:[De.b],component:Fe.a,className:"captchaInput"})):null,_.a.createElement(de.a,{isLoading:a}),_.a.createElement("button",{disabled:a},"Sign In"))})),ze=function(e){var t=e.setLoadingStatus,n=e.UserLogin,s=e.isLoading,a=e.captcha;return _.a.createElement("div",{className:"main"},_.a.createElement("div",{className:"container"},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-sm-12 header"},_.a.createElement(q.c,{to:"/login"},_.a.createElement("img",{className:"img-responsive",src:xe.a,alt:""})),_.a.createElement("div",{className:"header-button"},_.a.createElement("a",{href:"https://social-network.samuraijs.com/signUp"},_.a.createElement("button",null,"Sign Up")))))),_.a.createElement("div",{className:"section-login"},_.a.createElement("div",{className:"container"},_.a.createElement("div",{className:"row"},_.a.createElement("div",{className:"col-sm-4 col-sm-offset-4"},_.a.createElement("div",{className:"section-login-title"},_.a.createElement("h2",null,"Login Form")),_.a.createElement(He,{captcha:a,isLoading:s,onSubmit:function(e){t(!0),n(e)}}))))))},We=Me,Ke=Object(V.b)((function(e){return{isLoading:e.loginPage.isLoading,captcha:e.loginPage.captcha}}),{setLoadingStatus:M,UserLogin:function(e){var t=e.email,n=e.password,s=e.rememberMe,a=e.captcha;return function(e){e(M(!0)),function(e,t,n,s){return T.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:s})}(t,n,s,a).then((function(t){0===t.data.resultCode?C().then((function(t){if(0===t.data.resultCode){var n=t.data.data,s=n.id,a=n.login,c=n.email;e(L(s,a,c,!0))}})):10===t.data.resultCode?T.post("/security/get-captcha-url").then((function(t){var n;e((n=t.data.url,{type:D,url:n}))})):t.data.messages.length>0&&e(Object(U.a)("login",{_error:t.data.messages[0]})),e(M(!1))}))}}})(Object(ee.f)(We)),Ye=(n(297),function(e){var t=e.isLoading;return _.a.createElement("div",{className:"spinner-main"},t?_.a.createElement("img",{src:ke.a,alt:""}):null)}),_e=function(e){Object(X.a)(n,e);var t=Object(Z.a)(n);function n(){var e;Object($.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={url:null},e}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.getAuthStatus(),null==this.props.isAuth&&this.setState({url:this.props.location.pathname})}},{key:"getAuthStatus",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.getAuthStatus();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.props.component;return e=null==this.props.isAuth?_.a.createElement(Ye,{isLoading:!0}):this.props.isAuth?_.a.createElement(Re,{url:this.state.url}):_.a.createElement(Ke,null),_.a.createElement(ee.b,{key:t,path:t,render:function(){return e}})}}]),n}(_.a.Component),Be=Object(s.compose)(ee.f,Object(V.b)((function(e){return{isAuth:e.authPage.isAuth}}),{setRedirectUrl:function(e){return{type:"authReducer/SET-SUCCESS-STATUS",pathRedirect:e}},getAuthStatus:function(){return function(){var e=Object(o.a)(i.a.mark((function e(t){var n,s,a,c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:0===(n=e.sent).data.resultCode?(s=n.data.data,a=s.id,c=s.login,r=s.email,t(L(a,c,r,!0))):t(L(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))(_e);J.a.render(_.a.createElement(q.b,null,_.a.createElement(V.a,{store:K},_.a.createElement(Be,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},40:function(e,t,n){e.exports=n.p+"static/media/spinner.5b11b33e.svg"},52:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return r}));var s=function(e){return e?void 0:"Field is empty"},a=function(e){return function(t){return t&&t.length>e?"Must be ".concat(e," symbols or less"):void 0}},c=function(e){return e&&"true"!==e&&"false"!==e?"Must be 'true' or 'false'":void 0},r=function(e){return e&&(e.includes("http://")||e.includes("https://"))?"Wrong format of domain (\u0431\u0435\u0437 http(s)://)":void 0}},54:function(e,t,n){"use strict";var s=n(0),a=n.n(s),c=n(40),r=n.n(c);t.a=function(e){var t=e.isLoading;return a.a.createElement("div",null,t?a.a.createElement("img",{src:r.a,alt:""}):null)}},67:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var s=n(6),a=n(86),c=n(0),r=n.n(c),i=(n(259),function(e){var t=e.input,n=e.element,c=e.meta,i=c.touched,o=c.error,l=Object(a.a)(e,["input","element","meta"]),m=function(){return r.a.createElement("".concat(n),Object(s.a)({},t,{},l),null)};return i&&o?r.a.createElement("div",{className:"formControl-error"},m(),r.a.createElement("span",null,o)):r.a.createElement("div",{className:"formControl"},m())}),o=function(e){return r.a.createElement(i,Object.assign({element:"input"},e))},l=function(e){var t=e.input,n=e.meta,c=n.touched,i=n.error,o=Object(a.a)(e,["input","meta"]),l=function(){return r.a.createElement("input",Object(s.a)({},t,{},o),null)};return c&&i?r.a.createElement("div",{className:"formControlEdit-error"},l(),r.a.createElement("span",null,i)):r.a.createElement("div",{className:"formControlEdit"},l())}},92:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"g",(function(){return r})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return l}));var s=function(e){return e.profilePage.profile},a=function(e){return e.authPage.id},c=function(e){return e.profilePage.isLoading},r=function(e){return e.profilePage.status},i=function(e){return e.profilePage.postsData},o=function(e){return e.profilePage.profile.photos},l=function(e){return e.authPage}},93:function(e,t,n){"use strict";var s=n(65),a=n(5),c=n.n(a),r=n(10),i=n(17),o=n(6),l=n(19).create({withCredentials:!0,headers:{"API-KEY":"9832db98-b9d3-460c-9cab-5d06ff193b07"},baseURL:"https://social-network.samuraijs.com/api/1.0/"}),m=function(e){return l.get("profile/status/".concat(e))},u=function(e){var t=new FormData;return t.append("image",e),l.put("profile/photo",t,{"Content-Type":"multipart/form-data"})},d=function(e){return l.get("profile/".concat(e)).then((function(e){return e.data}))},p=function(e){return l.put("profile/status",{status:e})},f=n(37);n.d(t,"a",(function(){return N})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return k})),n.d(t,"g",(function(){return T})),n.d(t,"j",(function(){return C})),n.d(t,"e",(function(){return P})),n.d(t,"h",(function(){return L})),n.d(t,"f",(function(){return R})),n.d(t,"i",(function(){return A}));var w="profileReducer/ADD-POST",E="profileReducer/DELETE-POST",h="profileReducer/SET-AVATAR",g="profileReducer/LIKE-POST",v="profileReducer/DISLIKE-POST",b={postsData:[{id:1,likesCount:232,message:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 1",blockedId:[]},{id:2,likesCount:15,message:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 2",blockedId:[]},{id:3,likesCount:24,message:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 3",blockedId:[]},{id:4,likesCount:55,message:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 4",blockedId:[]},{id:5,likesCount:125,message:"\u0422\u0435\u0441\u0442\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 5",blockedId:[]}],profile:null,status:"",isLoading:!1},N=function(e){return{type:w,post:e}},O=function(e){return{type:"profileReducer/SET-USER-PROFILE",profile:e}},j=function(e){return{type:"profileReducer/SET-LOADING-STATUS",status:e}},S=function(e){return{type:"profileReducer/SET-PROFILE-STATUS",status:e}},y=function(e){return{type:E,id:e}},k=function(e,t){return{type:v,id:e,userId:t}},T=function(e,t){return{type:g,id:e,userId:t}},C=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e);case 2:0===(s=t.sent).data.resultCode&&n((a=s.data.data.photos,{type:h,photos:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},P=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(j(!0)),t.next=3,d(e);case 3:s=t.sent,n(j(!1)),n(O(s));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n,a){var r,i,m,u,p,w,E;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().authPage.id,t.next=3,c=e,l.put("profile",c);case 3:if(0!==(i=t.sent).data.resultCode){t.next=11;break}return t.next=7,d(r);case 7:m=t.sent,n(O(m)),t.next=15;break;case 11:for(u={contacts:{}},p=0;p<i.data.messages.length;p++)w=i.data.messages[p].replace("(Contacts->","").replace(")",""),E=(E=w.replace("Invalid url format ","")).toLowerCase(),u={contacts:Object(o.a)({},u.contacts,Object(s.a)({},E,w))};return n(Object(f.a)("edit",u)),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}var c}),t)})));return function(e,n){return t.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){var s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:200===(s=t.sent).status&&n(S(s.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},A=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(e);case 3:0===t.sent.data.resultCode&&n(S(e)),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(o.a)({},e,{postsData:[].concat(Object(i.a)(e.postsData),[{id:1e3*Math.random(0),likesCount:0,message:t.post,blockedId:[]}])});case"profileReducer/SET-USER-PROFILE":return Object(o.a)({},e,{profile:t.profile});case"profileReducer/SET-LOADING-STATUS":return Object(o.a)({},e,{isLoading:t.status});case g:return Object(o.a)({},e,{postsData:Object(i.a)(e.postsData.map((function(e){return e.id===t.id&&(e.likesCount++,e.blockedId=[].concat(Object(i.a)(e.blockedId),[t.userId])),e})))});case v:return Object(o.a)({},e,{postsData:Object(i.a)(e.postsData.map((function(e){return e.id===t.id&&(e.likesCount--,e.blockedId=Object(i.a)(e.blockedId.filter((function(e){return e!==t.userId})))),e})))});case h:return Object(o.a)({},e,{profile:Object(o.a)({},e.profile,{photos:t.photos})});case E:return Object(o.a)({},e,{postsData:Object(i.a)(e.postsData.filter((function(e){return e.id!==t.id})))});case"profileReducer/SET-PROFILE-STATUS":return Object(o.a)({},e,{status:t.status});default:return e}}},94:function(e,t,n){e.exports=n.p+"static/media/default-avatar.d2c893f5.png"},96:function(e,t,n){}},[[162,1,2]]]);
//# sourceMappingURL=main.ba973461.chunk.js.map